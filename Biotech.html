<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DNA to Protein Translator</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .start-codon { background-color: #34D399; color: white; }
    .stop-codon { background-color: #EF4444; color: white; }
    .codon { display: inline-block; padding: 4px 8px; margin: 2px; border-radius: 4px; background-color: #E5E7EB; }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <div class="container mx-auto p-4 max-w-4xl">
    <h1 class="text-3xl font-bold text-center mb-6">DNA to Protein Translator</h1>
    <p class="text-center mb-4">Enter a DNA sequence to see its mRNA, codons, and protein translation!</p>

    <!-- Input Form -->
    <div class="mb-6">
      <label for="dna-input" class="block text-lg font-medium mb-2">DNA Sequence (A, T, G, C):</label>
      <input
        id="dna-input"
        type="text"
        class="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="e.g., ATGGCCATTGCTAAGTAG"
      >
      <p id="error-message" class="text-red-500 hidden mt-2">Invalid DNA sequence! Use only A, T, G, C.</p>
      <button
        onclick="translateDNA()"
        class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
      >
        Translate
      </button>
    </div>

    <!-- Mutation Simulator -->
    <div class="mb-6">
      <h2 class="text-xl font-semibold mb-2">Mutation Simulator</h2>
      <label for="mutation-position" class="block">Position to mutate (1-based index):</label>
      <input
        id="mutation-position"
        type="number"
        class="w-full p-2 border rounded mb-2"
        placeholder="e.g., 3"
      >
      <label for="mutation-nucleotide" class="block">New Nucleotide (A, T, G, C):</label>
      <input
        id="mutation-nucleotide"
        type="text"
        class="w-full p-2 border rounded mb-2"
        placeholder="e.g., A"
      >
      <button
        onclick="mutateDNA()"
        class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"
      >
        Apply Mutation
      </button>
    </div>

    <!-- Output -->
    <div id="output" class="bg-white p-4 rounded shadow">
      <h2 class="text-xl font-semibold mb-2">Results</h2>
      <p><strong>mRNA Sequence:</strong> <span id="mrna-output"></span></p>
      <p><strong>Codons:</strong> <span id="codon-output"></span></p>
      <p><strong>Protein Sequence:</strong> <span id="protein-output"></span></p>
    </div>

    <!-- Codon Table -->
    <div class="mt-6">
      <h2 class="text-xl font-semibold mb-2">Codon Table</h2>
      <table class="w-full border-collapse border">
        <thead>
          <tr class="bg-gray-200">
            <th class="border p-2">Codon</th>
            <th class="border p-2">Amino Acid</th>
            <th class="border p-2">Codon</th>
            <th class="border p-2">Amino Acid</th>
          </tr>
        </thead>
        <tbody id="codon-table"></tbody>
      </table>
    </div>
  </div>

  <script>
    // Codon to Amino Acid Mapping
    const codonTable = {
      'AUG': 'Methionine (Start)',
      'UUU': 'Phenylalanine', 'UUC': 'Phenylalanine',
      'UUA': 'Leucine', 'UUG': 'Leucine', 'CUU': 'Leucine', 'CUC': 'Leucine',
      'CUA': 'Leucine', 'CUG': 'Leucine',
      'AUU': 'Isoleucine', 'AUC': 'Isoleucine', 'AUA': 'Isoleucine',
      'GUU': 'Valine', 'GUC': 'Valine', 'GUA': 'Valine', 'GUG': 'Valine',
      'UCU': 'Serine', 'UCC': 'Serine', 'UCA': 'Serine', 'UCG': 'Serine',
      'AGU': 'Serine', 'AGC': 'Serine',
      'CCU': 'Proline', 'CCC': 'Proline', 'CCA': 'Proline', 'CCG': 'Proline',
      'ACU': 'Threonine', 'ACC': 'Threonine', 'ACA': 'Threonine', 'ACG': 'Threonine',
      'GCU': 'Alanine', 'GCC': 'Alanine', 'GCA': 'Alanine', 'GCG': 'Alanine',
      'UAU': 'Tyrosine', 'UAC': 'Tyrosine',
      'UAA': 'Stop', 'UAG': 'Stop', 'UGA': 'Stop',
      'CAU': 'Histidine', 'CAC': 'Histidine',
      'CAA': 'Glutamine', 'CAG': 'Glutamine',
      'AAU': 'Asparagine', 'AAC': 'Asparagine',
      'AAA': 'Lysine', 'AAG': 'Lysine',
      'GAU': 'Aspartic Acid', 'GAC': 'Aspartic Acid',
      'GAA': 'Glutamic Acid', 'GAG': 'Glutamic Acid',
      'UGU': 'Cysteine', 'UGC': 'Cysteine',
      'UGG': 'Tryptophan',
      'CGU': 'Arginine', 'CGC': 'Arginine', 'CGA': 'Arginine', 'CGG': 'Arginine',
      'AGA': 'Arginine', 'AGG': 'Arginine',
      'GGU': 'Glycine', 'GGC': 'Glycine', 'GGA': 'Glycine', 'GGG': 'Glycine'
    };

    // Populate Codon Table
    function populateCodonTable() {
      const tableBody = document.getElementById('codon-table');
      const codons = Object.keys(codonTable);
      let html = '';
      for (let i = 0; i < codons.length; i += 2) {
        html += `<tr>
          <td class="border p-2 ${codons[i] === 'AUG' ? 'start-codon' : codons[i].includes('UAA') || codons[i].includes('UAG') || codons[i].includes('UGA') ? 'stop-codon' : ''}">${codons[i]}</td>
          <td class="border p-2">${codonTable[codons[i]]}</td>
          <td class="border p-2 ${i + 1 < codons.length ? (codons[i + 1] === 'AUG' ? 'start-codon' : codons[i + 1].includes('UAA') || codons[i + 1].includes('UAG') || codons[i + 1].includes('UGA') ? 'stop-codon' : '') : ''}">${i + 1 < codons.length ? codons[i + 1] : ''}</td>
          <td class="border p-2">${i + 1 < codons.length ? codonTable[codons[i + 1]] : ''}</td>
        </tr>`;
      }
      tableBody.innerHTML = html;
    }

    // Validate DNA Sequence
    function validateDNA(sequence) {
      return /^[ATGC]*$/.test(sequence);
    }

    // DNA to mRNA
    function dnaToMRNA(dna) {
      return dna.replace(/T/g, 'U');
    }

    // mRNA to Codons
    function mRNAToCodons(mrna) {
      return mrna.match(/.{1,3}/g) || [];
    }

    // Codons to Protein
    function codonsToProtein(codons) {
      let protein = [];
      let started = false;
      for (let codon of codons) {
        if (codon === 'AUG') {
          started = true;
          protein.push('Methionine');
        } else if (started && (codon === 'UAA' || codon === 'UAG' || codon === 'UGA')) {
          break;
        } else if (started) {
          protein.push(codonTable[codon] || 'Unknown');
        }
      }
      return protein;
    }

    // Translate DNA
    function translateDNA() {
      const dnaInput = document.getElementById('dna-input').value.toUpperCase();
      const errorMessage = document.getElementById('error-message');
      const mrnaOutput = document.getElementById('mrna-output');
      const codonOutput = document.getElementById('codon-output');
      const proteinOutput = document.getElementById('protein-output');

      // Validate Input
      if (!validateDNA(dnaInput)) {
        errorMessage.classList.remove('hidden');
        mrnaOutput.textContent = '';
        codonOutput.innerHTML = '';
        proteinOutput.textContent = '';
        return;
      }
      errorMessage.classList.add('hidden');

      // Process DNA
      const mrna = dnaToMRNA(dnaInput);
      const codons = mRNAToCodons(mrna);
      const protein = codonsToProtein(codons);

      // Display Results
      mrnaOutput.textContent = mrna;
      codonOutput.innerHTML = codons.map(codon => 
        `<span class="codon ${codon === 'AUG' ? 'start-codon' : (codon === 'UAA' || codon === 'UAG' || codon === 'UGA') ? 'stop-codon' : ''}">${codon}</span>`
      ).join(' ');
      proteinOutput.textContent = protein.join(' â†’ ');
    }

    // Mutation Simulator
    function mutateDNA() {
      const dnaInput = document.getElementById('dna-input').value.toUpperCase();
      const position = parseInt(document.getElementById('mutation-position').value) - 1;
      const nucleotide = document.getElementById('mutation-nucleotide').value.toUpperCase();
      const errorMessage = document.getElementById('error-message');

      if (!validateDNA(dnaInput)) {
        errorMessage.classList.remove('hidden');
        return;
      }
      if (!['A', 'T', 'G', 'C'].includes(nucleotide)) {
        errorMessage.classList.remove('hidden');
        errorMessage.textContent = 'Invalid nucleotide! Use A, T, G, or C.';
        return;
      }
      if (position < 0 || position >= dnaInput.length) {
        errorMessage.classList.remove('hidden');
        errorMessage.textContent = 'Invalid position!';
        return;
      }
      errorMessage.classList.add('hidden');

      // Apply Mutation
      const mutatedDNA = dnaInput.substring(0, position) + nucleotide + dnaInput.substring(position + 1);
      document.getElementById('dna-input').value = mutatedDNA;
      translateDNA();
    }

    // Initialize Codon Table
    populateCodonTable();
  </script>
</body>
</html>